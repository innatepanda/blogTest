<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    email
        <input name="email"/><br >
        password
        <input name="password" type="password"/>
        <button  id="createbtn" >create User</button>
        <script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-analytics.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-auth.js"></script>
<script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.0/dist/js.cookie.min.js"></script>
<script>
  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  var firebaseConfig = {
    apiKey: "AIzaSyCRJxdzuodYh3i3eydNsAE8xFjxSHWdW0w",
    authDomain: "blogtest-14ada.firebaseapp.com",
    databaseURL: "https://blogtest-14ada-default-rtdb.firebaseio.com",
    projectId: "blogtest-14ada",
    storageBucket: "blogtest-14ada.appspot.com",
    messagingSenderId: "975556708270",
    appId: "1:975556708270:web:e5f00eebca246453e0aa3f",
    measurementId: "G-G73JDL14WB"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();



  
  firebase.auth().setPersistence(firebase.auth.Auth.Persistence.None)
  
  document.getElementById('createbtn').addEventListener('click', 
  function(e)
  {

    e.preventDefault();
    console.log("click")
    const email=event.target.email.value;
    const pw=event.target.password.value;
    firebase.auth().createUserWithEmailandPassword(email, pw).then((user)=>{
        return user.getIdToken().then((idToken)=>{
            return fetch('/sessionLogin',{
                method:'POST',
                headers:{
                  Accept: 'application/json',
                  "Content-Type":"applications/json",
                  "CSRF-Token":Cookies.get("XSRF-TOKEN")
                },

                body:JSON.stringify({idToken})
            }).then(()=>{
              return firebase.auth().signOut()
            })
        })
    })
    firebase.auth().createUser({
        email: 'user@example.com',
        emailVerified: false,
        phoneNumber: '+11234567890',
        password: 'secretPassword',
        displayName: 'John Doe',
        photoURL: 'http://www.example.com/12345678/photo.png',
        disabled: false,
      })
      .then((userRecord) => {
        // See the UserRecord reference doc for the contents of userRecord.
        console.log('Successfully created new user:', userRecord.uid);
      })
      .catch((error) => {
        console.log('Error creating new user:', error);
      });
  }
  
  )
</script>
</body>
</html>